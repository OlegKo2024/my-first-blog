from django.shortcuts import render, get_object_or_404

# Create your views here.

def post_list_00(request):
    context = {
        'title': '–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±–ª–æ–≥–∞'                   # –ü–µ—Ä–µ–¥–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é title –≤ –±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω post_list.html
    }
    return render(request, 'app_blog/post_list.html', context)
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º / —Å–ª—ç—à –∫–æ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç–µ –ø—É—Ç—å –∫ —à–∞–±–ª–æ–Ω—É –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ  (–≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –¥–ª—è render), –∞ –Ω–µ –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ–º
    # Django –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—É—Ç—å –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —à–∞–±–ª–æ–Ω–æ–≤ (TEMPLATES['DIRS'] –∏–ª–∏ app/templates/)
    # –®–∞–±–ª–æ–Ω—ã –∏—â—É—Ç—Å—è –≤ –ø–∞–ø–∫–µ templates –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:
        # –¢–æ—á–∫–∞ (.) ‚Äî –∫–æ–≥–¥–∞ –¥–µ–ª–æ —Å–≤—è–∑–∞–Ω–æ —Å Python-–∫–æ–¥–æ–º (–∏–º–ø–æ—Ä—Ç—ã, –∑–∞–ø—É—Å–∫, –º–æ–¥—É–ª–∏, –∫–ª–∞—Å—Å—ã).
        # –°–ª—ç—à (/) ‚Äî –∫–æ–≥–¥–∞ –¥–µ–ª–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –ø–∞–ø–∫–∞–º–∏ (—à–∞–±–ª–æ–Ω—ã, —Å—Ç–∞—Ç–∏–∫–∞, –º–µ–¥–∏–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—É—Ç–µ–π –≤ –û–°).

from django.utils import timezone
from .models import Post

def post_list(request):
    posts = Post.objects.filter(published_date__lte=timezone.now()).order_by('published_date')
    context = {
        'title': 'Blog list (BL)',
        'post': posts
    }
    return render(request, 'app_blog/post_list.html', context)

# –û–±—ä—è—Å–Ω–µ–Ω–∏–µ Post.object
# Post ‚Äî –ø—Ä–æ—Å—Ç–æ –æ–ø–∏—Å–∞–Ω–∏–µ (–∫–∞–∫–∏–µ –ø–æ–ª—è –µ—Å—Ç—å —É –ø–æ—Å—Ç–∞)
# Post.objects ‚Äî "—Ä–æ–±–æ—Ç-–ø–æ–º–æ—â–Ω–∏–∫", –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
# –ú–µ—Ç–æ–¥—ã ‚Äî –∫–æ–º–∞–Ω–¥—ã —ç—Ç–æ–º—É "—Ä–æ–±–æ—Ç—É"
# –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ "—Ä–æ–±–æ—Ç" –Ω–∞—à–µ–ª –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö


# –≠—Ç–æ —Ç–∏–ø–∏—á–Ω–∞—è view-—Ñ—É–Ω–∫—Ü–∏—è –≤ Django, –∫–æ—Ç–æ—Ä–∞—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP-–æ—Ç–≤–µ—Ç
# def post_list(request):
    # post_list ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º, –Ω–æ –æ–±—ã—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–≥–∏–∫–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, home, article_list –∏ —Ç. –¥.).
    # request ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç. –≠—Ç–æ –æ–±—ä–µ–∫—Ç HttpRequest, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç:
        # –î–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞ (GET, POST, headers, user, session –∏ —Ç. –¥.).
        # –ú–µ—Ç–æ–¥—ã (request.method, request.GET.get() –∏ –¥—Ä.)
# return render(request, 'app_blog/post_list.html', {})
# –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã render(), –∫–æ—Ç–æ—Ä—ã–π —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç HTTP-–æ—Ç–≤–µ—Ç.
# üìå render() ‚Äî —ç—Ç–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è Django –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ HTML-—à–∞–±–ª–æ–Ω–∞ (—Å–±–æ—Ä–∫–∏ (putting together) –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ HttpResponse.
#   –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å render() ‚Äî –ø—Ä–∏–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å, —à–∞–±–ª–æ–Ω –∏ —Å–ª–æ–≤–∞—Ä—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (context) –∏ –≤–µ—Ä–Ω—É—Ç—å HTTP-–æ—Ç–≤–µ—Ç —Å –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω–Ω—ã–º HTML-–∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
# üìå –ê—Ä–≥—É–º–µ–Ω—Ç—ã render():
# request
    # –û–±—ä–µ–∫—Ç –∑–∞–ø—Ä–æ—Å–∞ (HttpRequest), –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –≤ view-—Ñ—É–Ω–∫—Ü–∏—é.
    # 'app_blog/post_list.html' - –ø—É—Ç—å –∫ HTML-—à–∞–±–ª–æ–Ω—É (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–∞–ø–∫–∏ templates).
# Django –∏—â–µ—Ç –µ–≥–æ –≤:
    # app_blog/
    # ‚îî‚îÄ‚îÄ templates/
    #     ‚îî‚îÄ‚îÄ app_blog/
    #         ‚îî‚îÄ‚îÄ post_list.html  # <- –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç —Ñ–∞–π–ª
    # –ü–æ—á–µ–º—É app_blog/post_list.html, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ post_list.html?
        # ‚Üí –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –µ—Å–ª–∏ –≤ –¥—Ä—É–≥–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –µ—Å—Ç—å —à–∞–±–ª–æ–Ω —Å —Ç–∞–∫–∏–º –∂–µ –∏–º–µ–Ω–µ–º.
    # {} (–∫–æ–Ω—Ç–µ–∫—Å—Ç) - –°–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —à–∞–±–ª–æ–Ω.
        # –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –æ–Ω –ø—É—Å—Ç–æ–π ({}), –∑–Ω–∞—á–∏—Ç, –≤ —à–∞–±–ª–æ–Ω –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –Ω–∏–∫–∞–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.
        # –ü—Ä–∏–º–µ—Ä —Å –¥–∞–Ω–Ω—ã–º–∏:
            # return render(request, 'app_blog/post_list.html', {
            #     'posts': Post.objects.all(),  # –ø–µ—Ä–µ–¥–∞—ë–º —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π
            #     'title': '–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞'
            # })

# request ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç. –≠—Ç–æ –æ–±—ä–µ–∫—Ç HttpRequest, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç:
# –î–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞ (GET, POST, headers, user, session –∏ —Ç. –¥.).
# –ú–µ—Ç–æ–¥—ã (request.method, request.GET.get() –∏ –¥—Ä.)

#     –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º?
#       Django –ø–æ–ª—É—á–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, GET /).
#       –í—ã–∑—ã–≤–∞–µ—Ç—Å—è post_list(request).
#       –§—É–Ω–∫—Ü–∏—è render():
#         –ó–∞–≥—Ä—É–∂–∞–µ—Ç —à–∞–±–ª–æ–Ω post_list.html.
#         –†–µ–Ω–¥–µ—Ä–∏—Ç –µ–≥–æ (–ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å).
#         –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç HttpResponse —Å –≥–æ—Ç–æ–≤—ã–º HTML


from django.http import HttpResponse


def contact_view(request, *args, **kwargs):
    return HttpResponse("<h1>Give me some break</h1")


def about_view(request, *args, **kwargs):
    #    return HttpResponse("<h1>Give me some break</h1")
    my_context = {
        'subtitle': 'About This Blog',
    }
    return render(request, 'app_blog/about.html', my_context)

def home_view(request, *args, **kwargs):
   return render(request, 'app_blog/home.html', {})


def blog_detail_view(request):
    context = {
        'subtitle': 'We Chat Blog Instructions',
    }
    return render(request, 'app_blog/blog.html', context)

def html_rules(request):
    from datetime import date
    posts = Post.objects.filter(
        published_date__date__gte=date(2025, 9, 5)
    ).order_by('published_date')
    context = {
        'title': 'BOOKMARK',
        'posts': posts
    }
    return render(request, 'app_blog/html_rules.html', context)

def new(request):
    posts_items = Post.objects.filter(published_date__lte=timezone.now()).order_by('published_date') # ‚Üê –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è Python (QuerySet)
    context = {
        'subtitle': 'Posts List',
        'posts': posts_items    # ‚Üê –ö–õ–Æ–ß 'posts' : –ó–ù–ê–ß–ï–ù–ò–ï posts_items, –∫–æ—Ç–æ—Ä—ã–π –∏–¥–µ—Ç –≤ new.html –∫–∞–∫ —Å–≤—è–∑—å –≤ {% for item in posts %} - –∏–Ω–∞—á–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
    }
    return render(request, 'app_blog/new.html', context) # –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π context –º–æ–∂–Ω–æ –≤ returns –¥–∞—Ç—å {'posts': posts_items})

def post_detail(request, pk):
    post_item = get_object_or_404(Post, pk=pk)
    return render(request, 'app_blog/post_detail.html', {'post': post_item})

"""
–§—É–Ω–∫—Ü–∏—è post_detail –æ–∂–∏–¥–∞–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ –≤—Ö–æ–¥ —Ç–æ—Ç —Å–∞–º—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä pk, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –∏–∑–≤–ª–µ—á–µ–Ω –∏–∑ URL (<int:pk>). 
–ë–µ–∑ —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –æ–Ω–∞ –Ω–µ —Å–º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—É—é –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
"""

from django.shortcuts import redirect  # ‚Üê –¥–æ–±–∞–≤–∏—Ç—å redirect
from .forms import PostForm

def post_add(request):
    if request.method == "POST":
        # –í–æ—Ç –∑–¥–µ—Å—å –¥–∞–Ω–Ω—ã–µ –∏–∑ request.POST –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã!
        form = PostForm(request.POST)  # ‚Üê –ö–ª—é—á–µ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ!
            # –ü–æ—á–µ–º—É –Ω–µ PostForm(request)?
                # –û–±—ä–µ–∫—Ç request —Å–æ–¥–µ—Ä–∂–∏—Ç –ú–ù–û–ì–û —Ä–∞–∑–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: –ú–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞, Cookies, –°–µ—Å—Å–∏–∏, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                # –∏ –î–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã (request.POST, request.FILES)
                # –§–æ—Ä–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å –¥–∞–Ω–Ω—ã–º–∏ —Ñ–æ—Ä–º—ã, –∞ –Ω–µ —Å–æ –≤—Å–µ–º –∑–∞–ø—Ä–æ—Å–æ–º.
        if form.is_valid():
            post = form.save(commit=False)  # –ù–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—Ä–∞–∑—É –≤ –ë–î - (commit=False) - –¥–≤—É—Ö—à–∞–≥–æ–≤–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
            # –°–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç –≤ –ø–∞–º—è—Ç–∏, –Ω–æ –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –±–∞–∑—É, –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            # –¢—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ post.save() –ø–æ—Ç–æ–º
            post.author = request.user
            post.published_date = timezone.now()
            post.save()                     # –¢–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î
            return redirect('post_detail', pk=post.pk)
    else:
        form = PostForm()   # –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Ñ–æ—Ä–º—ã
    return render(request, 'app_blog/post_add.html', {'form': form})
    # 'form' - —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ —Å–∞–º–∏

def post_edit(request, pk):
    post = get_object_or_404(Post, pk=pk)   # added post = get_object_or_404(Post, pk=pk)
    if request.method == "POST":
        form = PostForm(request.POST, instance=post)    # added instance=post
        if form.is_valid():
            post = form.save(commit=False)
            post.author = request.user
            post.published_date = timezone.now()
            post.save()
            return redirect('post_detail', pk=post.pk)
    else:
        form = PostForm(instance=post)
    return render(request, 'app_blog/post_edit.html', {'form': form})   # changed for 'app_blog/post_edit.html'

def post_delete(request, pk):
    post = get_object_or_404(Post, pk=pk)
    if request.method == "POST":
        post.delete()  # ‚Üê –í–æ—Ç –∏ –≤—Å—ë —É–¥–∞–ª–µ–Ω–∏–µ!
        return redirect('new')  # –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤
    return render(request, 'app_blog/post_delete.html', {'post': post})


"""
–ò—Ç–æ–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞ def post_add(request)::
{'form': form} ‚Üí —Å–æ–∑–¥–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
render() ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ –æ–±—ä–µ–∫—Ç Context Django
–®–∞–±–ª–æ–Ω –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –æ–±—ä–µ–∫—Ç—É —Ñ–æ—Ä–º—ã —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é form
{{ form.as_p }} ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥—ã –æ–±—ä–µ–∫—Ç–∞ —Ñ–æ—Ä–º—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HTML
–≠—Ç–æ –∏ –µ—Å—Ç—å –º–∞–≥–∏—è —Ä–∞–±–æ—Ç—ã —à–∞–±–ª–æ–Ω–æ–≤ Django - –æ–Ω–∏ "–≤–∏–¥—è—Ç" Python –æ–±—ä–µ–∫—Ç—ã, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç!

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –¥–µ—Ç–∞–ª—è—Ö:
1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ—Ä–º—ã:
    PostForm() –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–ª–∞—Å—Å–∞ —Ñ–æ—Ä–º—ã Django (—Å–º. –∏–º–ø–æ—Ä—Ç from .forms import PostForm)
    –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–µ —Å–≤—è–∑–∞–Ω–Ω–∞—è (unbound) —Ñ–æ—Ä–º–∞ - —Ç–æ –µ—Å—Ç—å –±–µ–∑ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ –Ω–µ–π –¥–∞–Ω–Ω—ã—Ö
        –ù–µ —Å–≤—è–∑–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ = —á–∏—Å—Ç—ã–π –±–ª–∞–Ω–∫ –∞–Ω–∫–µ—Ç—ã (–±–µ–∑ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
        –°–≤—è–∑–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ = –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –∞–Ω–∫–µ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    Django —Å–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã –ø–æ–ª–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—ã
–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
    –°–æ–∑–¥–∞–µ—Ç—Å—è —Å–ª–æ–≤–∞—Ä—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ {'form': form}  
    –û–±—ä–µ–∫—Ç —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç —à–∞–±–ª–æ–Ω–∞
2. –§—É–Ω–∫—Ü–∏—è render() –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
def render(request, template_name, context=None, content_type=None, status=None):
    # 1. –ó–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–∞
    template = loader.get_template(template_name)
    # 2. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ context –≤ –æ–±—ä–µ–∫—Ç Context
    if context is None:
        context = {}
    # –°–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç Context Django
    context = Context(context, request=request)
    # 3. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —à–∞–±–ª–æ–Ω–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
    content = template.render(context)
    return HttpResponse(content, content_type=content_type, status=status)
    –®–∞–≥ 3: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
–î–æ –≤—ã–∑–æ–≤–∞ render():
Memory:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   form = PostForm()  ‚îÇ ‚Üí –û–±—ä–µ–∫—Ç —Ñ–æ—Ä–º—ã –≤ –ø–∞–º—è—Ç–∏ Python
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
Context object:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ö–ª—é—á    ‚îÇ –ó–Ω–∞—á–µ–Ω–∏–µ              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 'form'  ‚îÇ <PostForm object>     ‚îÇ ‚Üê –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —à–∞–±–ª–æ–Ω–µ
‚îÇ 'request'‚îÇ <WSGIRequest object> ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
3. –®–∞–≥ 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤
{% extends 'app_blog/base_new.html' %}
–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —à–∞–±–ª–æ–Ω–∞:
    Django –Ω–∞—Ö–æ–¥–∏—Ç –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç base_new.html
    –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –±–ª–æ–∫–∏, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
    –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:
        base_new.html (—Ä–æ–¥–∏—Ç–µ–ª—å)
        ‚îÇ
        ‚îî‚îÄ‚îÄ post_add.html (–¥–æ—á–µ—Ä–Ω–∏–π)
4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–ª–æ–∫–∞ content
{% block content %} ... {% endblock %} - Django –∑–∞–º–µ–Ω—è–µ—Ç –±–ª–æ–∫ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º —à–∞–±–ª–æ–Ω–µ —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –∏–∑ –¥–æ—á–µ—Ä–Ω–µ–≥–æ —à–∞–±–ª–æ–Ω–∞.
5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ—Ä–º—ã - –∫–ª—é—á–µ–≤–æ–π —ç—Ç–∞–ø
–ß–∞—Å—Ç—å 1: CSRF Token - {% csrf_token %} –ß—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:
    <input type="hidden" name="csrfmiddlewaretoken" value="a1b2c3d4e5f6...">
    –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
        Django –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏
        –ü—Ä–∏ POST-–∑–∞–ø—Ä–æ—Å–µ middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω –∏ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –º–µ–∂—Å–∞–π—Ç–æ–≤–æ–π –ø–æ–¥–¥–µ–ª–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
–ß–∞—Å—Ç—å 2: –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã - {{ form.as_p }}. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏:
    –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –ø–æ–ª—è–º —Ñ–æ—Ä–º—ã:
    Django –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ form.fields –≤ –ø–æ—Ä—è–¥–∫–µ, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –≤ –∫–ª–∞—Å—Å–µ —Ñ–æ—Ä–º—ã
    –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è —Å–æ–∑–¥–∞–µ—Ç—Å—è HTML-—Ä–∞–∑–º–µ—Ç–∫–∞
7. –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ HTML
8. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
–•–æ—Ç—è —ç—Ç–æ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ —Ä–∞–º–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –ø–æ–ª–µ–∑–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª:
    –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º—É
    Django –ø—Ä–æ–≤–µ—Ä—è–µ—Ç CSRF —Ç–æ–∫–µ–Ω
    –°–æ–∑–¥–∞–µ—Ç—Å—è —Å–≤—è–∑–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å –¥–∞–Ω–Ω—ã–º–∏: form = PostForm(request.POST)
    –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–æ–∫

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è:
# views.py
def post_new(request):
    form = PostForm()
    return render(request, 'app_blog/post_add.html', {'form': form})
html
<!-- template.html -->
{{ form.as_p }}  <!-- –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π 'form' –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ -->

Django –Ω–µ –Ω–∞–≤—è–∑—ã–≤–∞–µ—Ç –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –í—ã —Å–∞–º–∏ –≤—ã–±–∏—Ä–∞–µ—Ç–µ:
    –ö–∞–∫ –Ω–∞–∑–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ Python –∫–æ–¥–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, banana > banana = PostForm()
    –ö–∞–∫–æ–π –∫–ª—é—á –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–ª–æ–≤–∞—Ä–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, worksheet > {'worksheet': banana}
    –ì–ª–∞–≤–Ω–æ–µ - —á—Ç–æ–±—ã –∏–º—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Å–æ–≤–ø–∞–¥–∞–ª–æ —Å –∏–º–µ–Ω–µ–º –≤ —à–∞–±–ª–æ–Ω–µ: {'worksheet': banana} > {{ worksheet.as_p }}
"""

